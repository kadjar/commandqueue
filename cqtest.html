<html>
    <head>
        <title>Command Queue</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    </head>
    <body>
        <div class="container">
            <h1>Command Queue</h1>
            <p>Use jQuery Deferreds to add commands to a queue, then execute them in sequence with manual completion of each command.</p>
            <button id="add">Add</button>
            <button id="start">Start</button>

            <ul id="log"></ul>
        </div>


    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="js/Class.js"></script>
    <script src="js/Commands.js"></script>

    <script>
    // demo script

        var cq = new CommandQueue();
        var count = 0;
        var ctxt = this;

        $('#add').on('click', function () {
            var cmd = cq.add(new Command(ctxt, log, count));

            count++;
        })

        $('#start').on('click', function() {
            cq.start();        
        })

        function log(i, complete) {       
            setTimeout(function() {
                $('#log').append($('<li></li>').text('logged item ' +i));
                complete();
            }, 2000);
        }
    </script>



    </body>
</html>